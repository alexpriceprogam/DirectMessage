{"code":"module.exports=function(e){var s={};function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=s,r.d=function(e,s,t){r.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,s){if(1&s&&(e=r(e)),8&s)return e;if(4&s&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&s&&\"string\"!=typeof e)for(var a in e)r.d(t,a,function(s){return e[s]}.bind(null,a));return t},r.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(s,\"a\",s),s},r.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},r.p=\"\",r(r.s=8)}([function(e,s){e.exports=require(\"express\")},function(e,s,r){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0}),s.authJwt=s.authLocal=s.myPassport=void 0;var t=o(r(2)),a=o(r(3)),n=r(9),i=o(r(4));function o(e){return e&&e.__esModule?e:{default:e}}const d=new a.default({usernameField:\"email\",passReqToCallback:!0},async(e,s,r,t)=>{console.log(\"local strategy\");try{const e=await i.default.findOne({email:s});return e?e.authenticateUser(r)?t(null,e):t(\"Wrong password.\",!1):t(null,!1,{message:\"User does not exist!\"})}catch(e){return t(e,!1)}}),l={jwtFromRequest:n.ExtractJwt.fromAuthHeaderAsBearerToken(),secretOrKey:\"SecretKey\"},u=new n.Strategy(l,async(e,s)=>{try{const r=await i.default.findById(e._id);return s(null,r?r:!1)}catch(e){return s(e,!1)}});t.default.use(d),t.default.use(u);s.myPassport=t.default,s.authLocal=t.default.authenticate(\"local\",{session:!1},function(e,s,r){console.log(r)}),s.authJwt=t.default.authenticate(\"jwt\",{session:!1})},function(e,s){e.exports=require(\"passport\")},function(e,s){e.exports=require(\"passport-local\")},function(e,s,r){\"use strict\";var t=d(r(5)),a=d(r(10)),n=d(r(11)),i=r(6),o=d(r(12));function d(e){return e&&e.__esModule?e:{default:e}}let l=new t.default.Schema({email:{type:String,unique:!0,required:[!0,\"Email address required!\"],validate:{validator:e=>a.default.isEmail(e)},message:\"{VALUE} is not a valid email.\"},name:{type:String,required:!0,max:100},password:{type:String},conversations:{type:[String]},friends:{type:[String]}});l.plugin(n.default,{message:\"{VALUE} already taken!\"}),l.pre(\"save\",function(e){return this.isModified(\"password\")&&(this.password=this._hashPassword(this.password)),e()}),l.methods={_hashPassword:e=>(0,i.hashSync)(e),authenticateUser(e){return(0,i.compareSync)(e,this.password)},createToken(){return o.default.sign({_id:this._id},\"SecretKey\")},toJSON(){return{_id:this._id,name:this.name,token:`JWT ${this.createToken()}`,email:this.email,friends:this.friends,conversations:this.conversations}}},e.exports=t.default.model(\"User\",l)},function(e,s){e.exports=require(\"mongoose\")},function(e,s){e.exports=require(\"bcrypt-nodejs\")},function(e,s){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /home/adam/testingThis/DirectMessage/server/controllers/user.controller.js: Unexpected token, expected \";\" (85:41)\\n\\n\u001b[0m \u001b[90m 83 | \u001b[39m\\t\\tconsole\u001b[33m.\u001b[39mlog(user)\u001b[0m\\n\u001b[0m \u001b[90m 84 | \u001b[39m\\t      \u001b[36mif\u001b[39m (err) { \u001b[36mreturn\u001b[39m next(err) }\u001b[0m\\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 85 | \u001b[39m\\t      \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39muser) { console\u001b[33m.\u001b[39mlog(\u001b[32m\"this?\"\u001b[39m) \u001b[36mreturn\u001b[39m res\u001b[33m.\u001b[39mjson( { message\u001b[33m:\u001b[39m info\u001b[33m.\u001b[39mmessage }) }\u001b[0m\\n\u001b[0m \u001b[90m    | \u001b[39m\\t                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 86 | \u001b[39m\\t    })(req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next)\u001b[33m;\u001b[39m  \u001b[0m\\n\u001b[0m \u001b[90m 87 | \u001b[39m}\u001b[0m\\n\u001b[0m \u001b[90m 88 | \u001b[39m\u001b[0m\\n    at Parser.raise (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:3939:15)\\n    at Parser.unexpected (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5248:16)\\n    at Parser.semicolon (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5232:40)\\n    at Parser.parseExpressionStatement (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7676:10)\\n    at Parser.parseStatementContent (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7272:19)\\n    at Parser.parseStatement (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7153:17)\\n    at Parser.parseBlockOrModuleBlockBody (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7707:23)\\n    at Parser.parseBlockBody (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7694:10)\\n    at Parser.parseBlock (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7683:10)\\n    at Parser.parseStatementContent (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7212:21)\\n    at Parser.parseStatement (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7153:17)\\n    at Parser.parseIfStatement (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7493:28)\\n    at Parser.parseStatementContent (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7184:21)\\n    at Parser.parseStatement (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7153:17)\\n    at Parser.parseBlockOrModuleBlockBody (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7707:23)\\n    at Parser.parseBlockBody (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7694:10)\\n    at Parser.parseBlock (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7683:10)\\n    at Parser.parseFunctionBody (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6933:24)\\n    at Parser.parseFunctionBodyAndFinish (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6913:10)\\n    at Parser.parseFunction (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7832:10)\\n    at Parser.parseFunctionExpression (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6371:17)\\n    at Parser.parseExprAtom (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6297:21)\\n    at Parser.parseExprSubscripts (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5924:21)\\n    at Parser.parseMaybeUnary (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5903:21)\\n    at Parser.parseExprOps (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5812:21)\\n    at Parser.parseMaybeConditional (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5784:21)\\n    at Parser.parseMaybeAssign (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5731:21)\\n    at Parser.parseExprListItem (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:7003:18)\\n    at Parser.parseCallExpressionArguments (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6124:22)\\n    at Parser.parseSubscript (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:6029:32)\\n    at Parser.parseSubscripts (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5944:19)\\n    at Parser.parseExprSubscripts (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5934:17)\\n    at Parser.parseMaybeUnary (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5903:21)\\n    at Parser.parseExprOps (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5812:21)\\n    at Parser.parseMaybeConditional (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5784:21)\\n    at Parser.parseMaybeAssign (/home/adam/testingThis/DirectMessage/server/node_modules/@babel/parser/lib/index.js:5731:21)')},function(e,s,r){\"use strict\";var t=r(1);const a=r(0),n=(r(13),r(14)),i=(r(15)(n),r(16)),o=r(2),d=(r(3).Strategy,r(17),r(6),r(5)),l=r(18),u=r(19);d.connect(\"mongodb://localhost/ChatAppDB\");const m=a();m.use(l()),m.use(i.urlencoded({extended:!0})),m.use(i.json()),m.use(o.initialize()),m.set(\"view engine\",\"ejs\"),m.use(\"/user\",u),m.get(\"/\",(e,s)=>{s.send(\"You got home page!\\n\")}),m.get(\"/login\",(e,s)=>{s.render(\"login\",{})}),m.post(\"/login\",(e,s,r)=>{console.log(\"app.post('/login')\"),o.authenticate(\"local\",(t,a,n)=>n?s.send(n.message):t?r(t):a?void e.login(a,e=>e?r(e):s.redirect(\"/authrequired\")):s.redirect(\"/login\"))(e,s,r)}),m.get(\"/authrequired\",(e,s)=>{e.isAuthenticated()?s.send(\"you hit the authentication endpoint\\n\"):s.redirect(\"/\")}),m.get(\"/private\",t.authJwt,(e,s)=>{s.send(\"Private info!\")}),m.listen(3e3,()=>{console.log(\"Listening on localhost:3000\")}),e.exports=m},function(e,s){e.exports=require(\"passport-jwt\")},function(e,s){e.exports=require(\"validator\")},function(e,s){e.exports=require(\"mongoose-unique-validator\")},function(e,s){e.exports=require(\"jsonwebtoken\")},function(e,s){e.exports=require(\"uuid/v4\")},function(e,s){e.exports=require(\"express-session\")},function(e,s){e.exports=require(\"session-file-store\")},function(e,s){e.exports=require(\"body-parser\")},function(e,s){e.exports=require(\"axios\")},function(e,s){e.exports=require(\"cors\")},function(e,s,r){\"use strict\";var t=i(r(20)),a=i(r(21)),n=function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};t.get||t.set?Object.defineProperty(s,r,t):s[r]=e[r]}return s.default=e,s}(r(7));r(1);function i(e){return e&&e.__esModule?e:{default:e}}const o=r(0).Router(),d=r(7);o.get(\"/show\",d.getUser),o.post(\"/new\",d.createUser),o.get(\"/new\",d.newUser),o.post(\"/register\",(0,t.default)(a.default.loginUser),n.registerUser),o.get(\"/register\",d.newRegisterUser),o.post(\"/login\",n.loginUser),o.get(\"/show/:query\",d.showUser),o.post(\"/add_friend\",n.addFriend),e.exports=o},function(e,s){e.exports=require(\"express-validation\")},function(e,s,r){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0});var t=function(e){return e&&e.__esModule?e:{default:e}}(r(22));s.default={loginUser:{body:{email:t.default.string().email().required(),password:t.default.string().required(),name:t.default.string().required()}}}},function(e,s){e.exports=require(\"joi\")}]);","extractedComments":[]}